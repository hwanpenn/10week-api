webpackJsonp([14],{1679:function(e,t,a){"use strict";function n(e,t,a){return t in e?Object.defineProperty(e,t,{value:a,enumerable:!0,configurable:!0,writable:!0}):e[t]=a,e}function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function o(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!==typeof t&&"function"!==typeof t?e:t}function l(e,t){if("function"!==typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(t,"__esModule",{value:!0});var i=a(0),c=a.n(i),s=a(12),u=a.n(s),d=a(36),f=a.n(d),m=a(54),p=a.n(m),h=a(43),b=a(44),k=a(45),T=a(47),y=a(46),g=a(55),v=a(132),E=a(32),w=a(11),C=a(600),S=(a.n(C),a(601)),O=(a.n(S),a(602)),D=a.n(O),M=a(56),x=a.n(M),_=function(){function e(e,t){for(var a=0;a<t.length;a++){var n=t[a];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,a,n){return a&&e(t.prototype,a),n&&e(t,n),t}}(),j=w.g.Item,R=w.i.Search,A=w.s.Option,F=(w.i.TextArea,w.d.Meta),P=function(e){function t(e){r(this,t);var a=o(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));return a.params={search:"",pageNo:1,pageSize:10},a.url="",a.getTableData=function(e,t,n){var r={search:e,pageNo:t,pageSize:n};a.setState({current:t}),a.props.getDataTkTask(r)},a.getOtherData=function(e,t,n){var r={pageNo:"1",pageSize:"999"};a.props.getOtherTkTask(r)},a.handleSearch=function(e){a.params.search=e,a.getTableData()},a.handlePageChange=function(e){a.params.pageNo=e,a.getTableData()},a.handleSelect=function(e){a.params.createdAt="all"===e?"":e,a.getTableData()},a.onRowSelect=function(e){a.setState({recordSelect:e})},a.showModifyModal=function(e){a.setState({visibleModify:!0,recordAction:e,_id:e.createdAt._id})},a.showModalCreate=function(){a.setState({visible:!0})},a.handleCancelModify=function(){a.setState({visibleModify:!1})},a.handleCancelCreate=function(){a.setState({visible:!1})},a.handleModify=function(){var e=a.formRefModifyData.props.form;e.validateFields(function(t,n){t||(n.url=a.url,n.id=a.state.recordAction._id,n.content=n.content.toHTML(),a.props.updateDataTkTask(n),e.resetFields(),a.setState({visibleModify:!1}))})},a.handleCreate=function(){var e=a.formRefDataCreate.props.form;e.validateFields(function(t,n){t||(n.url=a.url,n.author=window.sessionStorage.getItem("realName"),n.content=n.content.toHTML(),a.props.createDataTkTask(n),e.resetFields(),a.setState({visible:!1}))})},a.saveFormRefModify=function(e){a.formRefModifyData=e},a.saveFormRefCreate=function(e){a.formRefDataCreate=e},a.deleteConfirm=function(e){var t={id:e._id};a.props.deleteDataTkTask(t)},a.resetConfirm=function(e){var t={id:e._id};a.props.updatePasswordDataTkTask(t)},a.handleCancelTask=function(e){console.log(e),a.setState({visibleTask:!1})},a.showModalTask=function(e){a.props.history.push("/mobile/taskpage/"+e._id)},a.showModalTaskDetail=function(e){a.props.history.push("/mobile/taskshowpage/"+e.day)},a.handleOkTask=function(e){console.log(e),a.setState({visibleTask:!1})},a.state={checked:[],tableData:[],visible:!1,visibleTask:!1,visibleModify:!1,recordAction:{},recordSelect:{},defaultSelectValue:"",record:"",current:1},a}return l(t,e),_(t,[{key:"componentWillMount",value:function(){this.getTableData("",1,10)}},{key:"render",value:function(){var e=this,t=this,a=this.props.classes,i=[{title:"\u7b2c\u51e0\u5929",dataIndex:"day",key:"day",width:"10%",render:function(e){return c.a.createElement("a",null,"\u7b2c"+e+"\u5929")}},{title:"\u4efb\u52a1\u540d\u79f0",dataIndex:"name",key:"name",width:"15%",render:function(e){return c.a.createElement(w.p,{content:c.a.createElement("div",{style:{width:270}},c.a.createElement("p",null,e))},c.a.createElement("span",{style:{overflow:"hidden",textOverflow:"ellipsis",whiteSpace:"nowrap",display:"inline-block",width:200}},e))}},{title:"\u8be6\u60c5",dataIndex:"content",key:"content",width:"20%",render:function(e){return c.a.createElement(w.p,{content:c.a.createElement("div",{style:{width:270}},c.a.createElement("p",null,e))},c.a.createElement("span",{style:{overflow:"hidden",textOverflow:"ellipsis",whiteSpace:"nowrap",display:"inline-block",width:270}},e||"\u7a7a"))}},{title:"\u64cd\u4f5c",key:"action",width:"20%",render:function(t,a){return c.a.createElement("span",null,c.a.createElement("a",{onClick:function(){return e.showModifyModal(a)}},"\u4fee\u6539"),c.a.createElement(w.f,{type:"vertical"}),c.a.createElement("a",{onClick:function(){return e.showModalTask(a)}},"\u65f6\u95f4\u8f74"),c.a.createElement(w.f,{type:"vertical"}),c.a.createElement("a",{onClick:function(){return e.showModalTaskDetail(a)}},"\u8be6\u60c5"),c.a.createElement(w.f,{type:"vertical"}),c.a.createElement(w.o,{cancelText:"\u53d6\u6d88",okText:"\u786e\u5b9a",title:"\u786e\u5b9a\u5220\u9664?",onConfirm:function(){return e.deleteConfirm(a)}},c.a.createElement("a",null,"\u5220\u9664")))}}];void 0!==this.props.tablesTkTask.responseOtherTkTask.rows&&this.props.tablesTkTask.responseOtherTkTask.rows.map(function(e,t){return c.a.createElement(A,{value:e._id},e.name)});var s=w.g.create()(function(e){function a(e){r(this,a);var t=o(this,(a.__proto__||Object.getPrototypeOf(a)).call(this,e));return t.handleChange=function(e){t.setState({editorState:e})},t.state={editorState:D.a.createEditorState(null)},t}return l(a,e),_(a,[{key:"render",value:function(){var e=this.props,a=e.visible,r=e.onCancel,o=e.onCreate,l=e.form,i=l.getFieldDecorator;c.a.createElement(w.x,{accept:"image/*",showUploadList:!1,customRequest:this.uploadHandler},c.a.createElement("button",{type:"button",className:"control-item button upload-button","data-title":"\u63d2\u5165\u56fe\u7247"},c.a.createElement(w.h,{type:"picture",theme:"filled"})));return c.a.createElement(w.m,{width:900,zIndex:9999,visible:a,title:"\u65b0\u589e",cancelText:"\u53d6\u6d88",okText:"\u786e\u5b9a",onCancel:r,onOk:o},c.a.createElement(w.g,{layout:"vertical"},c.a.createElement(j,{label:"\u98df\u4efb\u52a1\u540d\u79f0"},i("name",{rules:[{required:!0,message:"\u8bf7\u8f93\u5165\u65b0\u589e\u98df\u4efb\u52a1\u540d\u79f0!"}]})(c.a.createElement(w.i,n({placeholder:""},"placeholder","\u8bf7\u8f93\u5165\u6807\u9898")))),c.a.createElement(j,{label:"\u7b2c\u51e0\u5929"},i("day",{initialValue:t.state.recordAction.day,rules:[{required:!0,message:"\u8bf7\u8f93\u5165\u7b2c\u51e0\u5929!"}]})(c.a.createElement(w.j,{min:1,max:70,defaultValue:1}))),c.a.createElement(j,{label:"\u5f3a\u5ea6\u6307\u6570"},i("heat",{rules:[{required:!1,message:"\u8bf7\u8f93\u5165\u5f3a\u5ea6\u6307\u6570!"}]})(c.a.createElement(w.j,{min:1,max:10,defaultValue:5}))),c.a.createElement(j,{label:"\u8be6\u7ec6\u63cf\u8ff0"},i("content",{rules:[{required:!1,validator:function(e,t,a){t.isEmpty()?a("\u8bf7\u8f93\u5165\u6b63\u6587\u5185\u5bb9"):a()}}]})(c.a.createElement(D.a,{placeholder:"\u8bf7\u8f93\u5165\u6b63\u6587\u5185\u5bb9"})))))}}]),a}(c.a.Component)),u=w.g.create()(function(e){function a(){var e,t,n,l;r(this,a);for(var i=arguments.length,c=Array(i),s=0;s<i;s++)c[s]=arguments[s];return t=n=o(this,(e=a.__proto__||Object.getPrototypeOf(a)).call.apply(e,[this].concat(c))),n.handleChange=function(e){console.log("selected "+e),n.props.form.setFieldsValue({categoryId:e})},n.handleBlur=function(){console.log("blur")},n.handleFocus=function(){console.log("focus")},l=t,o(n,l)}return l(a,e),_(a,[{key:"componentDidMount",value:function(){var e=this;setTimeout(function(){e.props.form.setFieldsValue({content:D.a.createEditorState(t.state.recordAction.content)})},200)}},{key:"render",value:function(){var e=this.props,a=e.visible,n=e.onCancel,r=e.onCreate,o=e.form,l=o.getFieldDecorator;return c.a.createElement(w.m,{width:900,zIndex:9999,visible:a,title:"\u4fee\u6539",cancelText:"\u53d6\u6d88",okText:"\u786e\u5b9a",onCancel:n,onOk:r},c.a.createElement(w.g,{layout:"vertical"},c.a.createElement(j,{label:"\u4efb\u52a1\b\u540d\u79f0"},l("name",{initialValue:t.state.recordAction.name,rules:[{required:!0,message:"\u8bf7\u8f93\u5165\u4fee\u6539\u98df\u4efb\u52a1\u540d\u79f0!"}]})(c.a.createElement(w.i,null))),c.a.createElement(j,{label:"\u7b2c\u51e0\u5929"},l("day",{initialValue:t.state.recordAction.day,rules:[{required:!0,message:"\u8bf7\u8f93\u5165\u7b2c\u51e0\u5929!"}]})(c.a.createElement(w.j,{min:1,max:70}))),c.a.createElement(j,{label:"\u5f3a\u5ea6\u6307\u6570"},l("heat",{rules:[{required:!1,message:"\u8bf7\u8f93\u5165\u5f3a\u5ea6\u6307\u6570!"}]})(c.a.createElement(w.j,{min:1,max:10,defaultValue:5}))),c.a.createElement(j,{label:"\u8be6\u7ec6\u63cf\u8ff0"},l("content",{rules:[{required:!1,validator:function(e,t,a){t.isEmpty()?a("\u8bf7\u8f93\u5165\u6b63\u6587\u5185\u5bb9"):a()}}]})(c.a.createElement(D.a,{placeholder:"\u8bf7\u8f93\u5165\u6b63\u6587\u5185\u5bb9"})))))}}]),a}(c.a.Component));return c.a.createElement(h.a,null,c.a.createElement(b.a,{xs:12},c.a.createElement(w.d,null,c.a.createElement(y.a,{color:"rose",icon:!0},c.a.createElement(f.a,{container:!0,spacing:24},c.a.createElement(f.a,{item:!0,xs:6},c.a.createElement(T.a,{color:"rose"},c.a.createElement(p.a,null)),c.a.createElement("h4",{className:a.cardIconTitle}," ")),c.a.createElement(f.a,{style:{textAlign:"right",marginTop:10},item:!0,xs:6},c.a.createElement(R,{placeholder:"\u540d\u79f0\u641c\u7d22",onSearch:function(t){return e.handleSearch(t)},style:{width:200,borderStyle:"solid",borderWidth:0,paddingRight:10}}),c.a.createElement(w.c,{onClick:this.showModalCreate,style:{height:30,marginRight:10},size:"small"},"\u589e\u52a0")))),c.a.createElement(k.a,null,c.a.createElement(w.v,{onRow:function(t){return{onClick:function(){e.onRowSelect(t)}}},key:"tablesTkTask",pagination:!1,columns:i,dataSource:this.props.tablesTkTask.tableDataTkTask,scroll:{x:600,y:360}}),c.a.createElement(w.l,{locale:x.a},c.a.createElement(w.n,{current:this.state.current,showTotal:function(e){return"\u603b\u5171 "+e+" \u6761"},showSizeChanger:!0,showQuickJumper:!0,defaultPageSize:10,total:this.props.tablesTkTask.tableCountTkTask,style:{textAlign:"right",marginTop:25},onShowSizeChange:function(t,a){return e.getTableData("",t,a)},onChange:function(t,a){return e.getTableData("",t,a)}}))))),c.a.createElement(s,{wrappedComponentRef:this.saveFormRefCreate,visible:this.state.visible,onCancel:this.handleCancelCreate,onCreate:this.handleCreate}),c.a.createElement(u,{wrappedComponentRef:this.saveFormRefModify,visible:this.state.visibleModify,onCancel:this.handleCancelModify,onCreate:this.handleModify}),c.a.createElement(w.m,{title:"\u56fe\u7247\u8be6\u60c5",visible:this.state.visibleTask,onCancel:this.handleCancelTask,footer:null},c.a.createElement(w.d,{hoverable:!0,style:{width:472},cover:c.a.createElement("img",{alt:"\u98df\u8c31\b\u56fe\u7247",src:t.state.record.url})},c.a.createElement(F,{title:t.state.record.name,description:t.state.record.extra}))))}}]),t}(c.a.Component),q=function(e){return{tablesTkTask:e.tablesTkTask}},z=function(e){return{getDataTkTask:function(t){e(Object(v.h)(t))},updateDataTkTask:function(t){e(Object(v.j)(t))},deleteDataTkTask:function(t){e(Object(v.g)(t))},createDataTkTask:function(t){e(Object(v.f)(t))},getOtherTkTask:function(t){e(Object(v.i)(t))},updatePasswordDataTkTask:function(t){e(Object(v.k)(t))}}};t.default=Object(E.b)(q,z)(u()(g.a)(P))}});
//# sourceMappingURL=tablesTkTask.288e1f3d.chunk.js.map